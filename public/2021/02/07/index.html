<!DOCTYPE html>
<html lang='en'><head>
  <title>Increase Swap | Zeroday</title>
  <meta charset='utf-8'>
  <meta name="generator" content="Hugo 0.82.0" />
  <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
  <meta http-equiv = 'X-UA-Compatible' content = 'IE=edge'>
<meta property = 'og:locale' content = 'en_US' />
<meta property="og:type" content="article">
<meta property = 'og:title' content = 'Increase Swap' />
<meta name="description" content="یه موقع هایی هست که برای انجام کارهای سنگینتون با کامپیوتر رم کم میارید و نیاز شدیدی به فضای بیشتر دارید، اگر هارد ssd داشتیه باشید شما میتونید ازش کمک بگیرید و …">
<meta property = 'og:description' content = 'یه موقع هایی هست که برای انجام کارهای سنگینتون با کامپیوتر رم کم میارید و نیاز شدیدی به فضای بیشتر دارید، اگر هارد ssd داشتیه باشید شما میتونید ازش کمک بگیرید و …'>
<meta property = 'og:url' content = 'https://ziroday.ir/2021/02/07/' />
<meta property = 'og:image' content = 'https://ziroday.ir/images/swap.jpg'/>
<meta name = 'twitter:card' content = 'summary_large_image' />
<meta name = 'twitter:creator' content = ''>
<meta name = 'twitter:title' content = 'Increase Swap' />
<meta property = 'twitter:description'  content = 'یه موقع هایی هست که برای انجام کارهای سنگینتون با کامپیوتر رم کم میارید و نیاز شدیدی به فضای بیشتر دارید، اگر هارد ssd داشتیه باشید شما میتونید ازش کمک بگیرید و …'/>
<meta name = 'twitter:image' content = 'https://ziroday.ir/images/swap.jpg' />
<link rel='apple-touch-icon' sizes='180x180' href='https://ziroday.ir/images/icons/apple-touch-icon.png'>
<link rel='icon' type='image/png' sizes='32x32' href='https://ziroday.ir/images/icons/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='16x16' href='https://ziroday.ir/images/icons/favicon-16x16.png'>
<link rel='manifest' href='https://ziroday.ir/images/icons/site.webmanifest'>

  <link rel='canonical' href='https://ziroday.ir/2021/02/07/'>
  <link rel = 'stylesheet' href = 'https://ziroday.ir/css/styles.4531cbcd5877eddc9e43fb5754e281c9df181abb3653cd3c64bda43d50abb037c17eea8b1743733d9b651b0b380fec4d53d319000a7ac55940210cb746297dd3.css' integrity = 'sha512-RTHLzVh37dyeQ/tXVOKByd8YGrs2U808ZL2kPVCrsDfBfuqLF0NzPZtlGws4D&#43;xNU9MZAAp6xVlAIQy3Ril90w=='>
</head>

  <body><div class = 'nav-drop'>
  <div class = 'nav-body'>
    
      <a href = 'https://ziroday.ir/about/' class = 'nav_item'>About</a>
      <a href = 'https://ziroday.ir/categories/linux/' class = 'nav_item'>Linux</a>
      <a href = 'https://ziroday.ir/categories/ansible/' class = 'nav_item'>Ansible</a>
      <a href = 'https://ziroday.ir/categories/database/' class = 'nav_item'>Database</a>
      <a href = 'https://ziroday.ir/categories/haproxy/' class = 'nav_item'>HAproxy</a>
    <div class = 'nav-close'></div>
  </div>
</div><header class = 'nav' >
  <nav class = 'nav-menu'>
    <a href='https://ziroday.ir' class = 'nav-brand nav_item'>Zeroday</a>
    <div class = 'nav_bar-wrap'>
      <div class = 'nav_bar'></div>
    </div>
  </nav>
</header>
<head>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2K0J9PL1ZX"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-2K0J9PL1ZX', { 'anonymize_ip': false });
}
</script>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-2K0J9PL1ZX', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  <script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/ziroday.ir"
    },
    "articleSection" : "post",
    "name" : "HAproxy Detect Attack",
    "headline" : "HAproxy Detect Attack",
    "description" : "HAproxy ابزاری قدرتمند است که در زمینه load balancing استفاده می شود. اما اگر بتوانید به درستی آن را کانفیگ کنید می توانید بسیاری از حملاتی که در بستر وب به سرور های شما می شود را با یک کانفیگ صحیح شناسایی کنید و سرورهای خودرا امن نگه دارید.\nدر این مستند قرار است درباره دستورات و تنظیمات درون HAproxy صحبت کنیم که به شما کمک شایانی برای حفظ امنیت سرورهای خود می کند.",
    "inLanguage" : "en-US",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2021",
    "datePublished": "2021-02-06 19:57:23 \u002b0330 \u002b0330",
    "dateModified" : "2021-02-06 19:57:23 \u002b0330 \u002b0330",
    "url" : "https:\/\/ziroday.ir\/2021\/02\/06\/",
    "wordCount" : "564",
    "keywords" : [ "haproxy","Blog" ]
}
</script>


</head>


    <main>

<section class = 'post_header' style = 'background-image:url(https://ziroday.ir/images/swap.jpg);'>
  <h1 class='post_title'>Increase Swap</h1>
</section>
<div class = 'post'>
  <article class='post_content'><p>یه موقع هایی هست که برای انجام کارهای سنگینتون با کامپیوتر رم کم میارید و نیاز شدیدی به فضای بیشتر
دارید، اگر هارد ssd داشتیه باشید شما میتونید ازش کمک بگیرید و فضای نسبتا کوچکی رو از هاردتون به رم قرض بدید (با اون قسمت از هارد مثل رم برخورد خواهد شد) که بتونه روش بنویسه و بخونه، اگر هاردتون ssd نیست اصلا بهش فکر نکنید، چون سرعت خواندن و نوشتن رم خیلی فراتر از هارد دیسکی هست و سیستم شما کند میشه.</p>
<p><strong>در واقع چی روی swap نوشته میشه؟</strong></p>
<p>رم اطلاعاتی رو که به صورت موقت بهشون نیاز نداره یا الویتشون پایین هست رو در این فضای swap مینویسه و در صورت نیاز خیلی سریع بهشون رجوع میکنه و می خونه و اگر دیگه بهشون کاری نداشته باشه پاکشون میکنه، نحوه ذخیره و بازیابی این روند خیلی پیچیده تر از این ۳ خطی که توضیح داده شده هست، برای اطلاعات بیشتر سرچ کنید.</p>
<p>نوعش در اصل یک فایل هست! یعنی تمام مدت داریم روی یک فایل از جنس swap مینویسیم و میخونیم.</p>
<p>حالا بریم ببینیم چطوری میشه اینکارو کرد.</p>
<ul>
<li>در نظر داشته باشید که استفاده هارد ssd به عنوان swap (به علت خواندن و نوشتن متوالی) طول عمر هارد شما رو کاهش میده.</li>
</ul>
<p>با این ۵ تا دستور به راحتی میتونید swap افزایش دهید یا ایجاد کنید.</p>
<p><strong>گام اول، خاموش کردن swap در صورت وجود داشتن</strong></p>
<p>اگر در حال استفاده از swap هستید باید اول خاموشش کنید تا سیستم ازش موقتا استفاده نکنه تا تنظیمات جدید رو پیاده کنیم.</p>
<p>دستور زیر را وارد کنید:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo swapoff -a
</code></pre></div><p><strong>گام دوم، ایجاد یا افزایش swap</strong></p>
<p>برای افزایش swap با استفاده از dd سعی میکنیم حجم این فایل رو با داده های صفر پر کنیم!!!</p>
<p>(فرقی نمیکند این فایل از قبل وجود داشته یا برای اولین بار ایجاد میکنید، اگر نباشه این دستور ایجادش میکند)
به طور مثال این فایل قبلا ۴ گیگابایت بوده، اما الان میخواهیم به ۸ تا بلوک ۱ گیگابایتی افزایشش بدیم.
دستور زیر را وارد کنید:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo dd if=/dev/zero of=/swapfile bs=1G count=8
</code></pre></div><p>این دستور چند ثانیه طول میکشه تا کارشو انجام بده!</p>
<p>if = آدرس ورودی اطلاعات، که اینجا قراره صفر تولید کنه</p>
<p>of =جایی که باید نوشته بشه</p>
<p>bs = سایز بلاک</p>
<p>count = تعداد بلاک ها</p>
<p><strong>گام سوم، محدود کردن سطح دسترسی</strong></p>
<p>این فایل باید فقط توسط root قابل خواندن و نوشتن باشد، پس در این بین سطح دسترسی فایل رو با دستور زیر تغییر بدید:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo chmod 600 /swapfile
</code></pre></div><p><strong>گام چهارم، فرمت کردن یا راه اندازی محیط Swap</strong></p>
<p>خب الان حجمش بزرگتر شده ولی تنظیمات درستی برای نوشتن اطلاعات روش رو نداره، باید درستش کنیم.</p>
<p>دستور mkswap اینکارو برای ما میکنه، فقط کافیه بهش آدرس فایل swap رو بدیم.</p>
<p>دستور زیر را وارد کنید:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo mkswap /swapfile
</code></pre></div><p>گام پنجم، روشن کردن swap</p>
<p>نحوه روشن کردن با خاموش کردن یکمی متفاوته، برای روشن کردنش باید آدرس فایل رو بدید.</p>
<p>با استفاده از دستور swapon.</p>
<p>دستور زیر را وارد کنید:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo swapon /swapfile
</code></pre></div><p>نیازی به restart نیست.</p>
<p>تبریک، الان صاحب ۸ گیگ فضای کمکی شدید، البته اگر انقدر فضا روی هارد ssd داشته باشید!
برای بررسی دستور زیر را بزنید، تا مشخصات آن را ببینید.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo swapon --show
</code></pre></div><p>توجه داشته باشید که این تنظیمات موقتی هستند، یعنی اگر سیستم شما reboot بشه swap از کار میافته،‌برای این که سیستم همیشه یادش بمونه از اون فضا استفاده کنه باید تو یه فایلی که سیستم عامل همیشه موقع راه اندازی خودش بهش نگاه میکنه آدرس رو بهش یادآوری کنید.</p>
<p>این فایل رو با یک ویرایشگر باز کنید</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">sudo nano /etc/fstab
</code></pre></div><p>آدرس فایل و نوعش رو در آخر فایل بهش اضافه کنید:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">/swapfile swap swap defaults 0 0
</code></pre></div><p>اگر براتون سوال پیش اومد یا پیشنهاد بهتری برای انجام دادن این روند ها دارید این پایین درمیون بزارید.</p>

    
    <div id="disqus_thread"></div>
<script>
  (function() {
    if (window.location.hostname == "localhost")
        return;
  var d = document, s = d.createElement('script');
  s.src = 'https://zeroday-ir.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
 
    <div class = 'post_extra'><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>

    
  </article>
  
  <aside><h3>More from Zeroday</h3>
<ul class='posts aside'>
<li class = 'post_item'>
  <a class = 'post_card' href='https://ziroday.ir/2021/04/06/' title = 'Iptables' style = 'background-image: url(https://ziroday.ir/images/iptables.jpg);'>
  </a>
  <div class = 'excerpt'>
    <div class = 'excerpt_meta'>
      <a href = 'https://ziroday.ir/tags/linux' class = 'post_tag'>Linux
      </a><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>
    <h3 class = 'post_link'>
      <a href='https://ziroday.ir/2021/04/06/'>Iptables</a>
    </h3>
    <p class = 'pale'>IPtables یک فایروال قدرتمند رایگان برای سیستم عامل لینوکس است که امکان اعمال قوانین و …</p>
  </div>
</li>

<li class = 'post_item'>
  <a class = 'post_card' href='https://ziroday.ir/2021/02/08/' title = 'FTP Installation' style = 'background-image: url(https://ziroday.ir/images/vsftpd.jpg);'>
  </a>
  <div class = 'excerpt'>
    <div class = 'excerpt_meta'>
      <a href = 'https://ziroday.ir/tags/linux' class = 'post_tag'>Linux
      </a><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>
    <h3 class = 'post_link'>
      <a href='https://ziroday.ir/2021/02/08/'>FTP Installation</a>
    </h3>
    <p class = 'pale'>سرور FTP مخفف (File Transfer Protocol) است كه یک پروتکل شبکه استاندارد بوده و برای انتقال …</p>
  </div>
</li>

</ul>

  </aside>
  

</div>
<script src = 'https://ziroday.ir/js/autosize.min.js'></script>
<script src = 'https://ziroday.ir/js/timeago.js'></script>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 699.428 699.428" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M502.714 0H240.428C194.178 0 153 42.425 153 87.429l-25.267.59c-46.228 0-84.019 41.834-84.019 86.838V612c0 45.004 41.179 87.428 87.429 87.428H459c46.249 0 87.428-42.424 87.428-87.428h21.857c46.25 0 87.429-42.424 87.429-87.428v-349.19zM459 655.715H131.143c-22.95 0-43.714-21.441-43.714-43.715V174.857c0-22.272 18.688-42.993 41.638-42.993l23.933-.721v393.429C153 569.576 194.178 612 240.428 612h262.286c0 22.273-20.765 43.715-43.714 43.715zm153-131.143c0 22.271-20.765 43.713-43.715 43.713H240.428c-22.95 0-43.714-21.441-43.714-43.713V87.429c0-22.272 20.764-43.714 43.714-43.714H459c-.351 50.337 0 87.975 0 87.975 0 45.419 40.872 86.882 87.428 86.882H612zm-65.572-349.715c-23.277 0-43.714-42.293-43.714-64.981V44.348L612 174.857zm-43.714 131.537H306c-12.065 0-21.857 9.77-21.857 21.835s9.792 21.835 21.857 21.835h196.714c12.065 0 21.857-9.771 21.857-21.835 0-12.065-9.792-21.835-21.857-21.835zm0 109.176H306c-12.065 0-21.857 9.77-21.857 21.834 0 12.066 9.792 21.836 21.857 21.836h196.714c12.065 0 21.857-9.77 21.857-21.836 0-12.064-9.792-21.834-21.857-21.834z"
    ></path>
  </symbol>
  <symbol viewBox="0 0 60.015 60.015" xmlns="http://www.w3.org/2000/svg" id="reply">
    <path d="M42.007 0h-24c-9.925 0-18 8.075-18 18v14c0 9.59 7.538 17.452 17 17.973v8.344a1.694 1.694 0 0 0 1.699 1.698c.44 0 .873-.173 1.198-.498l1.876-1.876C26.708 52.713 33.259 50 40.227 50h1.78c9.925 0 18-8.075 18-18V18c0-9.925-8.075-18-18-18zm16 32c0 8.822-7.178 16-16 16h-1.78c-7.502 0-14.556 2.921-19.86 8.226l-1.359 1.359V44a1 1 0 1 0-2 0v3.949c-8.356-.52-15-7.465-15-15.949V18c0-8.822 7.178-16 16-16h24c8.822 0 16 7.178 16 16v14z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="scan">
    <path d="M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zm112 340H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zm370-112c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z"></path>
  </symbol>
</svg>
<footer class="footer">
  <div class="footer_inner wrap pale">
    <p>&copy;&nbsp;<span class="year"></span>&nbsp;Zeroday.
    Designed by  <a href = 'https://www.linkedin.com/in/mhdbkhshi/' title = 'Linkedin Profile'>M.bakhshi</a></p>
  </div>
</footer><script type="text/javascript" src="https://ziroday.ir/js/bundle.5e0b4c85114cf0b04ee873e699248fdc25fe576c7696dfa64e769392358047c54a5d3cd146642878b99a54694bfafde61088d7a1e98279124e539098db6e557e.js" integrity="sha512-XgtMhRFM8LBO6HPmmSSP3CX&#43;V2x2lt&#43;mTnaTkjWAR8VKXTzRRmQoeLmaVGlL&#43;v3mEIjXoemCeRJOU5CY225Vfg==" crossorigin="anonymous"></script>
  </body>
</html>
