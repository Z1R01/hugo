<!DOCTYPE html>
<html lang='en'><head>
  <title>vmstat Command | Zeroday</title>
  <meta charset='utf-8'>
  <meta name="generator" content="Hugo 0.82.0" />
  <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
  <meta http-equiv = 'X-UA-Compatible' content = 'IE=edge'>
<meta property = 'og:locale' content = 'en_US' />
<meta property="og:type" content="article">
<meta property = 'og:title' content = 'vmstat Command' />
<meta name="description" content="دستور vmstat یا Virtual Memory Statistics ، برای نمایش میزان مصرف حافظه مجازی(virtual memory)، kernerl threads، فضای مصرفی دیسک ها، پردازش های سیستم، بلوک های …">
<meta property = 'og:description' content = 'دستور vmstat یا Virtual Memory Statistics ، برای نمایش میزان مصرف حافظه مجازی(virtual memory)، kernerl threads، فضای مصرفی دیسک ها، پردازش های سیستم، بلوک های …'>
<meta property = 'og:url' content = 'https://ziroday.ir/2020/03/06/' />
<meta property = 'og:image' content = 'https://ziroday.ir/images/monitor.jpeg'/>
<meta name = 'twitter:card' content = 'summary_large_image' />
<meta name = 'twitter:creator' content = ''>
<meta name = 'twitter:title' content = 'vmstat Command' />
<meta property = 'twitter:description'  content = 'دستور vmstat یا Virtual Memory Statistics ، برای نمایش میزان مصرف حافظه مجازی(virtual memory)، kernerl threads، فضای مصرفی دیسک ها، پردازش های سیستم، بلوک های …'/>
<meta name = 'twitter:image' content = 'https://ziroday.ir/images/monitor.jpeg' />
<link rel='apple-touch-icon' sizes='180x180' href='https://ziroday.ir/images/icons/apple-touch-icon.png'>
<link rel='icon' type='image/png' sizes='32x32' href='https://ziroday.ir/images/icons/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='16x16' href='https://ziroday.ir/images/icons/favicon-16x16.png'>
<link rel='manifest' href='https://ziroday.ir/images/icons/site.webmanifest'>

  <link rel='canonical' href='https://ziroday.ir/2020/03/06/'>
  <link rel = 'stylesheet' href = 'https://ziroday.ir/css/styles.4531cbcd5877eddc9e43fb5754e281c9df181abb3653cd3c64bda43d50abb037c17eea8b1743733d9b651b0b380fec4d53d319000a7ac55940210cb746297dd3.css' integrity = 'sha512-RTHLzVh37dyeQ/tXVOKByd8YGrs2U808ZL2kPVCrsDfBfuqLF0NzPZtlGws4D&#43;xNU9MZAAp6xVlAIQy3Ril90w=='>
</head>

  <body><div class = 'nav-drop'>
  <div class = 'nav-body'>
    
      <a href = 'https://ziroday.ir/about/' class = 'nav_item'>About</a>
      <a href = 'https://ziroday.ir/categories/linux/' class = 'nav_item'>Linux</a>
      <a href = 'https://ziroday.ir/categories/ansible/' class = 'nav_item'>Ansible</a>
      <a href = 'https://ziroday.ir/categories/database/' class = 'nav_item'>Database</a>
      <a href = 'https://ziroday.ir/categories/haproxy/' class = 'nav_item'>HAproxy</a>
    <div class = 'nav-close'></div>
  </div>
</div><header class = 'nav' >
  <nav class = 'nav-menu'>
    <a href='https://ziroday.ir' class = 'nav-brand nav_item'>Zeroday</a>
    <div class = 'nav_bar-wrap'>
      <div class = 'nav_bar'></div>
    </div>
  </nav>
</header>
<head>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2K0J9PL1ZX"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-2K0J9PL1ZX', { 'anonymize_ip': false });
}
</script>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-2K0J9PL1ZX', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  <script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/ziroday.ir"
    },
    "articleSection" : "post",
    "name" : "HAproxy Detect Attack",
    "headline" : "HAproxy Detect Attack",
    "description" : "HAproxy ابزاری قدرتمند است که در زمینه load balancing استفاده می شود. اما اگر بتوانید به درستی آن را کانفیگ کنید می توانید بسیاری از حملاتی که در بستر وب به سرور های شما می شود را با یک کانفیگ صحیح شناسایی کنید و سرورهای خودرا امن نگه دارید.\nدر این مستند قرار است درباره دستورات و تنظیمات درون HAproxy صحبت کنیم که به شما کمک شایانی برای حفظ امنیت سرورهای خود می کند.",
    "inLanguage" : "en-US",
    "author" : "",
    "creator" : "",
    "publisher": "",
    "accountablePerson" : "",
    "copyrightHolder" : "",
    "copyrightYear" : "2021",
    "datePublished": "2021-02-06 19:57:23 \u002b0330 \u002b0330",
    "dateModified" : "2021-02-06 19:57:23 \u002b0330 \u002b0330",
    "url" : "https:\/\/ziroday.ir\/2021\/02\/06\/",
    "wordCount" : "564",
    "keywords" : [ "haproxy","Blog" ]
}
</script>


</head>


    <main>

<section class = 'post_header' style = 'background-image:url(https://ziroday.ir/images/monitor.jpeg);'>
  <h1 class='post_title'>vmstat Command</h1>
</section>
<div class = 'post'>
  <article class='post_content'><p>دستور vmstat یا Virtual Memory Statistics ، برای نمایش میزان مصرف حافظه مجازی(virtual memory)، kernerl threads، فضای مصرفی دیسک ها، پردازش های سیستم، بلوک های I/O، وقفه ها، میزان فعالیت CPU و غیره استفاده می شود.</p>
<p>به طور پیش فرض دستور vmstat در سیستم های لینوکس در دسترس نیست. لذا نیاز به نصب بسته sysstat می باشد که که شامل برنامه vmstat است.</p>
<p><img src="https://ziroday.ir/images/vmstat.png" alt="monitor"></p>
<p>در تصویر بالا شما نتیجۀ دستور vmstat بدون مشخصۀ a را می بینید که اطلاعات درون ستون هایی دسته بندی شدند.
یک توضیح مختصری هم راجع به سرتیترهای هر کدام از موارد ردیف اول خدمت شما عرض کنم:</p>
<h5 id="ستون-procs">ستون Procs</h5>
<p>ستون Procs که مخفف Proccess و اطلاعاتی از فرآیند بلاک شده و در حال اجرا را نمایش می‌دهد. در زیر این ستون به ترتیب فیلد r مجموع تعداد فر‌آیندهای runnable و فیلد b مجموع فرآیندهای بلاک شده را نشان می‌دهد.</p>
<h5 id="ستون-memory">ستون memory</h5>
<p>ستون memory اطلاعاتی از حافظه اصلی را نشان می‌دهد که دارای ۴ فیلد است. فیلد swpd معرف میزان فضای swap اسفاده شده است که مانند شکل اول هیچ فضایی استفاده نشده است. فیلد free مانند ستون free در اولین خط خروجی دستور free میزان فضای آزاد حافظه اصلی را نشان می‌دهد. فیلد buff و cache به ترتیب مانند ستون‌های buffer و cache در خروجی دستور free میزان فضای بافر و cache را نشان می‌دهند.</p>
<h5 id="ستون-swap">ستون swap</h5>
<p>ستون swap اطلاعاتی از swap را نشان می‌دهد؛ فیلد si یعنی swap in و به میزان فضایی که فرآیندها از دیسک به حافظه اصلی آورده شده‌اند، اشاره می‌کند؛ عملیاتی که طی آن فرآیندی از حافظه swap که برروی دیسک قرار دارد به حافظه اصلی آوره می‌شود swap in گفته می‌شود. so یعنی swap out و بلعکس عملیات swap in است و به عملیاتی که طی آن فرآیندی از حافظه اصلی وارد ناحیه swap بر روی دیسک می‌گویند و فیلد so میزان این عملیات را نشان می‌دهد. به مجموع این دو عملیات swapping یا مبادله کردن می‌گونید و چون فیلد swpd برابر صفر است و از حافظه swap استفاده نشده است پس هیچ عملیات si و so نیز انجام نگرفته پس این دوفیلد نیز مانند فیلد swpd برابر صفر هستند.</p>
<h5 id="ستون-io">ستون io</h5>
<p>ستون io میزان عملیات‌های ورودی وخروجی یا Input/Output را نشان می‌دهند. این ستون دارای دوفیلد bi که مخفف Block Input و معرف تعداد بلاک‌های حافظه‌ای که از دیسک گرفته یا دریافت شده‌اند یا همان «خواندن از دیسک» و bo مخفف Block Output و یعنی تعداد بلاک‌های حافظه‌ای که بر روی دیسک فرستاده شده‌اند یا همان «نوشتن بر دیسک» را نشان می‌دهد.</p>
<h5 id="ستون-system">ستون system</h5>
<p>ستون system دارای دو in که مخفف Intrrupt یا تعداد وقفه‌ها در هر ثانیه است. یکی از اعمالی که باعث ایجاد وقفه می‌شود درخواست خواندن از دیسک است. به محض بروز وقفه برای خواندن از دیسک مقدار این فیلد تغییر کرده و فرآیند باید متوقف شود تا بیخود پردازنده را اشغال نکند، پیش از متوقف کردن فرآیند باید تمامی وضعیت یک فرآیند نگهداری شود که به محض تکمیل عمل I/O دوباره آن فرآیند از وضعیت قبلی خود اجرا شود. به عملیات نگهداری وضعیت فرایند Context Switch گویند که فیلد دوم یعنی cs مخفف Context Switch ها در هر ثانیه است.</p>
<h5 id="ستون-cpu">ستون cpu</h5>
<p>ستون cpu دارای ۴ فیلد است. فضای حافظه اصلی به دو ناحیه Kernel-Level و User-level تقسیم می‌شود که ناحیه User-level هیچ دخالتی بر ناحیه Kernel-Level ندارد. اولین فیلد یعنی us زمان مصرف شده برای اجرا کردن کدهای کاربری را نشان می‌دهد. فیلد sy میزان زمان صرف شده برای اجرای کدهای کرنل را نشان می‌دهد. id که مخفف idle است میزان زمان بیکاری یا Idle Time پردازنده و فیلد wa میزان زمان صرف شده برای تکمیل یک عمل I/O را نشان می‌دهند</p>
<h5 id="اجرای-vmstat-هر-x-ثانیه">اجرای vmstat هر x ثانیه</h5>
<p>اگر می خواهید برای یک مدت زمان خاص با فاصلۀ زمانی تعیین شده نتیجۀ این دستور به شما برگردد، می‌توانید از حالت زیر این دستور استفاده کنید.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vmstat <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">6</span>
</code></pre></div><p>عدد ۲ نشان از این می دهد که هر ۲ ثانیه نتیجۀ جدید به شما برگردد و عدد ۶ هم می‌گویند که حداکثر تا ۶ نتیجۀ تازه سازی شده به ما نشان داده شود. همین الان این دستور را بزنید تا ببینید منظورم چه بوده است. اگر می خواهید با نمایش هر نتیجه تاریخ و زمان خروجی را هم نشان دهد از مشخصۀ -t در دستور استفاده کنید.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vmstat -t <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">5</span>
</code></pre></div><h5 id="آمار-و-ارقام-به-سبکی-دیگر-و-با-شمارشگرهای-جدید">آمار و ارقام به سبکی دیگر و با شمارشگرهای جدید</h5>
<p>یکی دیگر از مشخصه‌های این دستور s نام دارد که برای نمایش اطلاعات به سبکی دیگر به کار می‌رود. به صورت ستونی و همچنین به همراه دیگر اطلاعات خرد دیگر.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vmstat -s
</code></pre></div><h5 id="آمار-و-ارقام-حافظۀ-سخت">آمار و ارقام حافظۀ سخت</h5>
<p>دستور vmstat به همراه مشخصۀ -d اطلاعات مربوط به حافظۀ سخت سرور را نشان خواهد داد.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vmstat -d
</code></pre></div><p>اگر با واحد کیلوبایت راحت نیستید، می‌توانید با وارد کردن دستور زیر اعداد و ارقام به واحد مگابایت نمایش داده شوند.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vmstat -s -S M <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">5</span>
</code></pre></div>
    
    <div id="disqus_thread"></div>
<script>
  (function() {
    if (window.location.hostname == "localhost")
        return;
  var d = document, s = d.createElement('script');
  s.src = 'https://zeroday-ir.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
 
    <div class = 'post_extra'><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>

    
  </article>
  
  <aside><h3>More from Zeroday</h3>
<ul class='posts aside'>
<li class = 'post_item'>
  <a class = 'post_card' href='https://ziroday.ir/2021/04/06/' title = 'Iptables' style = 'background-image: url(https://ziroday.ir/images/iptables.jpg);'>
  </a>
  <div class = 'excerpt'>
    <div class = 'excerpt_meta'>
      <a href = 'https://ziroday.ir/tags/linux' class = 'post_tag'>Linux
      </a><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>
    <h3 class = 'post_link'>
      <a href='https://ziroday.ir/2021/04/06/'>Iptables</a>
    </h3>
    <p class = 'pale'>IPtables یک فایروال قدرتمند رایگان برای سیستم عامل لینوکس است که امکان اعمال قوانین و …</p>
  </div>
</li>

<li class = 'post_item'>
  <a class = 'post_card' href='https://ziroday.ir/2021/02/08/' title = 'FTP Installation' style = 'background-image: url(https://ziroday.ir/images/vsftpd.jpg);'>
  </a>
  <div class = 'excerpt'>
    <div class = 'excerpt_meta'>
      <a href = 'https://ziroday.ir/tags/linux' class = 'post_tag'>Linux
      </a><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>
    <h3 class = 'post_link'>
      <a href='https://ziroday.ir/2021/02/08/'>FTP Installation</a>
    </h3>
    <p class = 'pale'>سرور FTP مخفف (File Transfer Protocol) است كه یک پروتکل شبکه استاندارد بوده و برای انتقال …</p>
  </div>
</li>

</ul>

  </aside>
  

</div>
<script src = 'https://ziroday.ir/js/autosize.min.js'></script>
<script src = 'https://ziroday.ir/js/timeago.js'></script>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 699.428 699.428" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M502.714 0H240.428C194.178 0 153 42.425 153 87.429l-25.267.59c-46.228 0-84.019 41.834-84.019 86.838V612c0 45.004 41.179 87.428 87.429 87.428H459c46.249 0 87.428-42.424 87.428-87.428h21.857c46.25 0 87.429-42.424 87.429-87.428v-349.19zM459 655.715H131.143c-22.95 0-43.714-21.441-43.714-43.715V174.857c0-22.272 18.688-42.993 41.638-42.993l23.933-.721v393.429C153 569.576 194.178 612 240.428 612h262.286c0 22.273-20.765 43.715-43.714 43.715zm153-131.143c0 22.271-20.765 43.713-43.715 43.713H240.428c-22.95 0-43.714-21.441-43.714-43.713V87.429c0-22.272 20.764-43.714 43.714-43.714H459c-.351 50.337 0 87.975 0 87.975 0 45.419 40.872 86.882 87.428 86.882H612zm-65.572-349.715c-23.277 0-43.714-42.293-43.714-64.981V44.348L612 174.857zm-43.714 131.537H306c-12.065 0-21.857 9.77-21.857 21.835s9.792 21.835 21.857 21.835h196.714c12.065 0 21.857-9.771 21.857-21.835 0-12.065-9.792-21.835-21.857-21.835zm0 109.176H306c-12.065 0-21.857 9.77-21.857 21.834 0 12.066 9.792 21.836 21.857 21.836h196.714c12.065 0 21.857-9.77 21.857-21.836 0-12.064-9.792-21.834-21.857-21.834z"
    ></path>
  </symbol>
  <symbol viewBox="0 0 60.015 60.015" xmlns="http://www.w3.org/2000/svg" id="reply">
    <path d="M42.007 0h-24c-9.925 0-18 8.075-18 18v14c0 9.59 7.538 17.452 17 17.973v8.344a1.694 1.694 0 0 0 1.699 1.698c.44 0 .873-.173 1.198-.498l1.876-1.876C26.708 52.713 33.259 50 40.227 50h1.78c9.925 0 18-8.075 18-18V18c0-9.925-8.075-18-18-18zm16 32c0 8.822-7.178 16-16 16h-1.78c-7.502 0-14.556 2.921-19.86 8.226l-1.359 1.359V44a1 1 0 1 0-2 0v3.949c-8.356-.52-15-7.465-15-15.949V18c0-8.822 7.178-16 16-16h24c8.822 0 16 7.178 16 16v14z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="scan">
    <path d="M456.66 0H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66C470.632 30 482 41.368 482 55.341V127c0 8.284 6.716 15 15 15s15-6.716 15-15V55.341C512 24.826 487.174 0 456.66 0zM15 142c8.284 0 15-6.716 15-15V55.341C30 41.368 41.368 30 55.34 30H127c8.284 0 15-6.716 15-15s-6.716-15-15-15H55.34C24.826 0 0 24.826 0 55.341V127c0 8.284 6.716 15 15 15zm112 340H55.34C41.368 482 30 470.632 30 456.659V385c0-8.284-6.716-15-15-15s-15 6.716-15 15v71.659C0 487.174 24.826 512 55.34 512H127c8.284 0 15-6.716 15-15s-6.716-15-15-15zm370-112c-8.284 0-15 6.716-15 15v71.659C482 470.632 470.632 482 456.66 482H385c-8.284 0-15 6.716-15 15s6.716 15 15 15h71.66c30.515 0 55.34-24.826 55.34-55.341V385c0-8.284-6.716-15-15-15zM341.643 110h47.575c6.497 0 11.782 5.285 11.782 11.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574C431 98.743 412.256 80 389.218 80h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15zM81 121.782v47.574c0 8.284 6.716 15 15 15s15-6.716 15-15v-47.574c0-6.497 5.286-11.782 11.782-11.782h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15h-47.575C99.744 80 81 98.743 81 121.782zM170.357 400h-47.575c-6.497 0-11.782-5.285-11.782-11.782v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574C81 411.257 99.744 430 122.782 430h47.575c8.284 0 15-6.716 15-15s-6.716-15-15-15zM431 388.218v-47.574c0-8.284-6.716-15-15-15s-15 6.716-15 15v47.574c0 6.497-5.286 11.782-11.782 11.782h-47.575c-8.284 0-15 6.716-15 15s6.716 15 15 15h47.575C412.256 430 431 411.257 431 388.218zM1 256c0 8.284 6.716 15 15 15h480c8.284 0 15-6.716 15-15s-6.716-15-15-15H16c-8.284 0-15 6.716-15 15z"></path>
  </symbol>
</svg>
<footer class="footer">
  <div class="footer_inner wrap pale">
    <p>&copy;&nbsp;<span class="year"></span>&nbsp;Zeroday.
    Designed by  <a href = 'https://www.linkedin.com/in/mhdbkhshi/' title = 'Linkedin Profile'>M.bakhshi</a></p>
  </div>
</footer><script type="text/javascript" src="https://ziroday.ir/js/bundle.5e0b4c85114cf0b04ee873e699248fdc25fe576c7696dfa64e769392358047c54a5d3cd146642878b99a54694bfafde61088d7a1e98279124e539098db6e557e.js" integrity="sha512-XgtMhRFM8LBO6HPmmSSP3CX&#43;V2x2lt&#43;mTnaTkjWAR8VKXTzRRmQoeLmaVGlL&#43;v3mEIjXoemCeRJOU5CY225Vfg==" crossorigin="anonymous"></script>
  </body>
</html>
